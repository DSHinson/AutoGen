using Microsoft.AspNetCore.Mvc;
using TestAuoGenApi.models_for_auto_gen;
using TestAutoGen.Dal

namespace TestAuoGenApi.Controllers
{

    [ApiController]
    [Route("[controller]")]
    public class {{ClassName}}Controller : ControllerBase
    {
        private readonly {{ClassName}}Repo _Repo;

        public {{ClassName}}Controller({{ClassName}}Repo {{ClassName}}Repo)
        {
            _Repo = param{{ClassName}}Repo ?? throw new ArgumentNullException(nameof({{ClassName}}Repo )); 
        }

        [HttpGet]
        public virtual List<{{ClassName}}> Get()
        {
            return _Repo.GetAllUsers();
        }

        [HttpGet("{id}")]
        public virtual {{ClassName}} GetSingle(Guid id)
        {
            return _collection.SingleOrDefault(x => x.Id == id);
        }

        [HttpPost]
        public virtual void Create({{ClassName}} item)
        {
            item.Id = Guid.NewGuid();
            _collection.Add(item);
        }

        [HttpPut("{id}")]
        public virtual void Update(Guid id, {{ClassName}} item)
        {
            var existing = _collection.Single(x => x.Id == id);
            item.Id = id;
            _collection.Remove(existing);
            _collection.Add(item);
        }

        [HttpDelete("{id}")]
        public virtual void Delete(Guid id)
        {
            var existing = _collection.Single(x => x.Id == id);
            _collection.Remove(existing);
        }
    }
}